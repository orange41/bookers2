<main>
  <div class="container px-5 px-sm-0">
    <div class="row">
      <div class="col-md-3">
        <h2>User info</h2>
        <img src="<%= @user.profile_image.present? ? url_for(@user.profile_image) : asset_path('no_image.jpg') %>" style="width: 100px; height: 100px;" />
        <table class="table">
          <tbody>
            <tr></tr>
            <tr>
              <th>name</th>
              <th><%= @user.name %></th>
            </tr>
            <tr>
              <th>introduction</th>
              <th><%= @user.introduction %></th>
            </tr>
          </tbody>
        </table>
        <div class="row">
          <a class="btn btn-outline-secondary btn-block" href="<%= edit_user_path(@user) %>">
            <i class="fas fa-wrench"></i>
          </a>
        </div>
        <h2 class="mt-3">New book</h2>
        <form action="/books" accept-charset="UTF-8" method="post">
          <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
          <div class="form-group">
            <label for="book_title">Title</label>
            <input class="form-control book_title" type="text" name="book[title]" id="book_title">
          </div>
          <div class="form-group">
            <label for="book_body">Opinion</label>
            <textarea class="form-control book_body" name="book[body]" id="book_body"></textarea>
          </div>
          <div class="form-group">
            <input type="submit" name="commit" value="Create Book" class="btn btn-success" data-disable-with="Create Book">
          </div>
        </form>
      </div>
      <div class="col-md-8 offset-md-1">
        <h2>Books</h2>
        <table class="table table-hover table-inverse">
          <thead>
            <tr>
              <th>Image</th>
              <th>Title</th>
              <th>Opinion</th>
            </tr>
          </thead>
          <tbody>
            <% @books.each do |book| %>
              <tr>
                <td>
                  <% if book.user && book.user.profile_image.attached? %>
                    <a href="<%= user_path(book.user) %>">
                      <%= image_tag(book.user.profile_image.variant(resize: "100x100")) %>
                    </a>
                  <% else %>
                    <%= image_tag('no_image.jpg', size: "100x100") %>
                  <% end %>
                </td>
                <td>
                  <a href="<%= book_path(book) %>">
                    <%= book.title %>
                  </a>
                </td>
                <td><%= book.body %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</main>
